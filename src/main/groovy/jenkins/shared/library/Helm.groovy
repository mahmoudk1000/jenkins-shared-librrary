#!/usr/bin/env groovy
/*
* This Groovy source file was generated by the Gradle 'init' task.
*/
package main.groovy.jenkins.shared.library

class Helm implements Serializable {
    def script

    Helm(script) {
        this.script = script
    }

    def installChart(String appName, String valuesFileName, String tag, String nameSpace) {
        script.sh label: "Installing Helm Chart ${appName}:${tag} in ${nameSpace}",
                    script: """
                    helm upgrade --dependency-update --install ${appName} . \
                        --values ${valuesFileName}.yaml \
                        --set image.tag=${tag} \
                        --namespace ${nameSpace}
                    """
    }

}
